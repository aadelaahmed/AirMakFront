<main>
  <section id="hero" class="login">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-xl-4 col-lg-5 col-md-6 col-sm-8">
          <div id="login">
            <div class="text-center"><img src="../../../../assets/img/logo_sticky.png" alt="Image" width="160" height="34"></div>
            <hr>
            <form [formGroup]="registerForm" (ngSubmit)="registerUser($event)">
              <div class="form-group">
                <label>First Name</label>
                <input type="text" class="form-control" placeholder="First Name" formControlName="firstName">
                <div class="error-message" *ngIf="registerForm.get('firstName').invalid && registerForm.get('firstName').touched">
                  <!-- Display validation errors for firstName field -->
                  <div *ngIf="registerForm.get('firstName').errors?.['required']" class="text-danger">First Name is required</div>
                  <div *ngIf="registerForm.get('firstName').errors?.['minlength']" class="text-danger">First Name must be at least 2 characters</div>
                  <div *ngIf="registerForm.get('firstName').errors?.['maxlength']" class="text-danger">First Name cannot exceed 10 characters</div>
                </div>
              </div>
              <div class="form-group">
                <label>Last Name</label>
                <input type="text" class="form-control" placeholder="Last Name" formControlName="lastName">
                <div class="error-message" *ngIf="registerForm.get('lastName').invalid && registerForm.get('lastName').touched">
                  <!-- Display validation errors for lastName field -->
                  <div *ngIf="registerForm.get('lastName').errors?.['required']" class="text-danger">Last Name is required</div>
                  <div *ngIf="registerForm.get('lastName').errors?.['minlength']" class="text-danger">Last Name must be at least 2 characters</div>
                  <div *ngIf="registerForm.get('lastName').errors?.['maxlength']" class="text-danger">Last Name cannot exceed 10 characters</div>
                </div>
              </div>
              <div class="form-group">
                <label>Birthdate</label>
                <input type="date" class="form-control" formControlName="birthdate">
                <div *ngIf="registerForm.get('birthdate').errors?.['required']" class="text-danger">
                  Birthdate is required.
                </div>
                <div *ngIf="registerForm.get('birthdate').errors?.['minimumAge']" class="text-danger">
                  Minimum age requirement is 15 years old.
                </div>
              </div>

              <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" class="form-control" placeholder="Phone number" formControlName="phoneNumber">
                <div class="error-message" *ngIf="registerForm.get('phoneNumber').invalid && registerForm.get('phoneNumber').touched">
                  <!-- Display validation errors for phoneNumber field -->
                  <div *ngIf="registerForm.get('phoneNumber').errors?.['required']" class="text-danger">Phone Number is required</div>
                  <div *ngIf="registerForm.get('phoneNumber').errors?.['pattern']" class="text-danger">Please format it as 01xxxxxxxxx</div>
                </div>
              </div>
              <div class="form-group">
                <label>Email</label>
                <input type="email" class="form-control" placeholder="Email" formControlName="email" (input)="checkEmailExists()">
                <div class="error-message" *ngIf="registerForm.get('email').invalid && registerForm.get('email').touched">
                  <!-- Display validation errors for email field -->
                  <div *ngIf="registerForm.get('email').errors?.['required']" class="text-danger">Email is required</div>
                  <div *ngIf="registerForm.get('email').errors?.['pattern']" class="text-danger">Please format it as example@example.com</div>
                </div>
                <div  *ngIf="emailExists" style="color:#DC3545">Email Already Exists!</div>
                <div  *ngIf="!registerForm.get('email').errors && !emailExists" style="color:green">Email Is Available!</div>
              </div>              
              <div class="form-group">
                <label>Password</label>
                <input type="password" class="form-control" placeholder="Password" formControlName="password">
                <div class="error-message" *ngIf="registerForm.get('password').invalid && registerForm.get('password').touched">
                  <!-- Display validation errors for password field -->
                  <div *ngIf="registerForm.get('password').errors?.['required']" class="text-danger">Password is required</div>
                  <div *ngIf="registerForm.get('password').errors?.['minlength']" class="text-danger">Password must be at least 8 characters</div>
                  <div *ngIf="registerForm.get('password').errors?.['maxlength']" class="text-danger">Password cannot exceed 20 characters</div>
                  <div *ngIf="registerForm.get('password').errors?.['pattern']" class="text-danger">Password must contain at least one letter, one digit, and one special character</div>
                </div>
              </div>
              <div class="form-group">
                <label>Confirm password</label>
                <input type="password" class="form-control" placeholder="Confirm password" formControlName="confirmPassword">
                <div class="error-message" *ngIf="registerForm.get('confirmPassword').invalid && registerForm.get('confirmPassword').touched">
                  <!-- Display validation errors for confirmPassword field -->
                  <small class="form-text text-danger"
                         *ngIf="registerForm.get('confirmPassword')?.hasError('required')">Password is
                    required.
                  </small>
                  <small class="form-text text-danger"
                         *ngIf="registerForm.get('confirmPassword')?.hasError('matching')">Passwords do not match.
                  </small>
                </div>
              </div>
              <div id="pass-info" class="clearfix"></div>
              <button type="submit" class="btn_full" [class.disabled]="isButtonDisabled" [disabled]="isButtonDisabled" [ngStyle]="isButtonDisabled ? {'pointer-events': 'none', 'opacity': '0.5', 'cursor': 'not-allowed'} : null">
                <span *ngIf="!isButtonDisabled">Create an account</span>
                <span *ngIf="isButtonDisabled">Creating...</span>
              </button>
              
              

            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
